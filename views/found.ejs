<!-- found.ejs -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Found Items</title>
    <link rel="stylesheet" href="report.css">
    <style>
    /* styles.css */

    /* Grid container */
    .grid-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); /* Responsive grid */
        gap: 20px;
        width: 80%;
        margin: 0 auto; /* Center the grid */
        padding-top: 80px;
    }
    
    /* Item box */
    .item-box {
        border: 1px solid #ddd;
        padding: 20px;
        background-color: #fff;
        text-align: center;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s ease;
    }
    
    .item-box:hover {
        transform: translateY(-5px); /* Add a slight lift on hover */
    }
    
    /* Image container */
    .image-container {
        height: 200px; /* Set a fixed height for the image container */
        overflow: hidden;
        border-radius: 10px; /* Rounded corners */
    }
    
    .item-image {
        width: 100%;
        height: 100%;
        object-fit: cover; /* Ensure the image covers the entire container */
    }
    
    /* Details container */
    .details-container {
        margin-top: 15px;
        font-size: 16px;
    }
    
    /* Pagination */
    .pagination {
        margin-top: 20px;
        text-align: center;
    }
    
    .pagination a {
        display: inline-block;
        padding: 8px 16px;
        margin-right: 5px;
        text-decoration: none;
        color: #333;
        border: 1px solid #ddd;
        border-radius: 5px;
        transition: background-color 0.3s ease;
    }
    
    .pagination a.active {
        background-color: #007bff;
        color: #fff;
        border: 1px solid #007bff;
    }
    
    .pagination a:hover {
        background-color: #f0f0f0;
    }
    </style>
</head>
<body>
    <header>
        <div class="logo">ReClaim</div>
        <input type="checkbox" id="nav_check" hidden>
        <nav>
            <ul>
                <li>
                    <a href="/dashboard">Home</a>
                </li>
                <li>
                    <a href="lost">Lost</a>
                </li>
                <li>
                    <a href="found" class="active"></a>Found</a>
                </li>
                <li>
                    <a href="profile">Profile</a>
                </li>
                <li>
                    <a href="login">Logout</a>
                </li>
            </ul>
        </nav>
        <label for="nav_check" class="hamburger">
            <div></div>
            <div></div>
            <div></div>
        </label>
    </header>
    <div class="search-container">
        <form id="searchForm">
            <input type="text" id="searchInput" placeholder="Search...">
            <button type="submit">Search</button>
        </form>
    </div>

    <div class="grid-container">
        <% for (let i = 0; i < foundItems.length; i++) { %>
            <div class="item-box">
                <div class="image-container">
                    <img class="item-image" src="data:image/jpeg;base64,<%= foundItems[i].photo.toString('base64') %>" alt="Found Item Photo">
                </div>
                <div class="details-container">
                    <p><strong>Name:</strong> <%= foundItems[i].itemName %></p>
                    <p><strong>Place Found:</strong> <%= foundItems[i].place %></p>
                    <p><strong>User:</strong> <%= foundItems[i].user_id %></p>
                    <p><strong>Date Found:</strong> <%= foundItems[i].date.toDateString() %></p>
                </div>
            </div>
            <% if ((i + 1) % 6 === 0) { %>
                </div><div class="grid-container">
            <% } %>
        <% } %>
    </div>

    <div class="pagination">
        <% for (let i = 1; i <= totalPages; i++) { %>
            <a href="/found?page=<%= i %>" class="<%= currentPage === i ? 'active' : '' %>"><%= i %></a>
        <% } %>
    </div>

    <!-- JavaScript to handle form submission for searching -->
<script>
    document.getElementById('searchInput').addEventListener('keydown', async function(event) {
        // Check if the pressed key is Enter (key code 13)
        if (event.key === 'Enter') {
            event.preventDefault(); // Prevent the default behavior of the Enter key
            const searchQuery = this.value; // Get the search query
            // Redirect to the search page with the search query
            window.location.href = `/searchFound?query=${encodeURIComponent(searchQuery)}`;
        }
    });

    document.getElementById('searchForm').addEventListener('submit', async function(event) {
        event.preventDefault(); // Prevent the default form submission behavior
        const searchQuery = document.getElementById('searchInput').value; // Get the search query
        // Redirect to the search page with the search query
        window.location.href = `/searchFound?query=${encodeURIComponent(searchQuery)}`;
    });
</script>

</body>
</html>
